#! /var/vcap/packages/ruby/bin/ruby

require "dyndrop"

Kernel.abort "Missing credentials" if ARGV[0].nil? or ARGV[1].nil?

client = Dyndrop::Client.new(<%= properties.cc.srv_api_url %>)
begin
  client.login("#{ARGV[0]}", "#{ARGV[1]}")
rescue Dyndrop::Denied
  Kernel.abort "Invalid credentials"
end
puts "Credentials are valid"
